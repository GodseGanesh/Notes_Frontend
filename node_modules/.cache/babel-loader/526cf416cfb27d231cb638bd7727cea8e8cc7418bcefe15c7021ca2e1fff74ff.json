{"ast":null,"code":"import React from\"react\";import{useEffect,useState}from\"react\";import{ReactComponent as ArrowLeft}from\"../assets/arrow-left.svg\";import{useParams,useNavigate}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Notepage(history){const{noteId}=useParams();const navigate=useNavigate();let[note,setNote]=useState(null);useEffect(()=>{getNote();},[noteId]);let getNote=async()=>{if(noteId===\"new\")return;let response=await fetch(\"/api/note/\".concat(noteId,\"/\"));let data=await response.json();setNote(data);};let updateNote=async()=>{fetch(\"/api/note/\".concat(noteId,\"/update/\"),{method:\"PUT\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(note)});};let handleSubmit=()=>{if(noteId===\"new\"&&note===null){navigate(\"/\");return;}if(noteId!==\"new\"&&note.body===\"\"){deleteNote();}else if(noteId!==\"new\"){updateNote();}else if(noteId===\"new\"&&note.body!==null){createNote();}navigate(\"/\");};let deleteNote=()=>{fetch(\"/api/note/\".concat(noteId,\"/delete/\"),{method:\"DELETE\",headers:{\"Content-Type\":\"application/json\"}});navigate(\"/\");};let createNote=async()=>{fetch(\"/api/note/create/\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(note)});};let handleChange=value=>{setNote(note=>({...note,body:value}));};return/*#__PURE__*/_jsxs(\"div\",{className:\"note\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"note-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:/*#__PURE__*/_jsx(ArrowLeft,{onClick:handleSubmit})}),noteId!==\"new\"?/*#__PURE__*/_jsx(\"button\",{onClick:deleteNote,children:\"Delete\"}):/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,children:\"Done\"})]}),/*#__PURE__*/_jsx(\"textarea\",{onChange:e=>{handleChange(e.target.value);},value:note===null||note===void 0?void 0:note.body})]});}export default Notepage;","map":{"version":3,"names":["React","useEffect","useState","ReactComponent","ArrowLeft","useParams","useNavigate","jsx","_jsx","jsxs","_jsxs","Notepage","history","noteId","navigate","note","setNote","getNote","response","fetch","concat","data","json","updateNote","method","headers","body","JSON","stringify","handleSubmit","deleteNote","createNote","handleChange","value","className","children","onClick","onChange","e","target"],"sources":["E:/Django_Projects/mynotes/mynotes_frontend/src/pages/Notepage.js"],"sourcesContent":["import React from \"react\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { ReactComponent as ArrowLeft } from \"../assets/arrow-left.svg\";\r\nimport { useParams, useNavigate } from \"react-router-dom\";\r\n\r\nfunction Notepage(history) {\r\n  \r\n\r\n\r\n\r\n\r\n\r\n  const { noteId } = useParams();\r\n\r\n  const navigate = useNavigate();\r\n\r\n  let [note, setNote] = useState(null);\r\n\r\n\r\n\r\n  useEffect(() => {\r\n    getNote();\r\n  }, [noteId]);\r\n\r\n  let getNote = async () => {\r\n    if (noteId === \"new\") return;\r\n\r\n    let response = await fetch(`/api/note/${noteId}/`);\r\n\r\n    let data = await response.json();\r\n\r\n    setNote(data);\r\n  };\r\n\r\n  let updateNote = async () => {\r\n    fetch(`/api/note/${noteId}/update/`, {\r\n      method: \"PUT\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n       \r\n      },\r\n      body: JSON.stringify(note),\r\n    });\r\n   \r\n  };\r\n\r\n  let handleSubmit = () => {\r\n    if (noteId === \"new\" && note === null) {\r\n      navigate(\"/\");\r\n      return;\r\n    }\r\n\r\n    if (noteId !== \"new\" && note.body === \"\") {\r\n      deleteNote();\r\n    } else if (noteId !== \"new\") {\r\n      updateNote();\r\n    } else if (noteId === \"new\" && note.body !== null) {\r\n      createNote();\r\n    }\r\n    \r\n\r\n    navigate(\"/\");\r\n  };\r\n\r\n  let deleteNote = () => {\r\n    fetch(`/api/note/${noteId}/delete/`, {\r\n      method: \"DELETE\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        \r\n        \r\n      },\r\n    });\r\n    navigate(\"/\");\r\n  };\r\n\r\n  let createNote = async () => {\r\n    fetch(`/api/note/create/`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        \r\n      },\r\n      body: JSON.stringify(note),\r\n    });\r\n    \r\n\r\n   \r\n  };\r\n\r\n  let handleChange = (value) => {\r\n    setNote((note) => ({ ...note, body: value }));\r\n  };\r\n\r\n\r\n\r\n\r\n  return (\r\n    <div className=\"note\">\r\n      <div className=\"note-header\">\r\n        <h3>\r\n          <ArrowLeft onClick={handleSubmit} />\r\n        </h3>\r\n        {noteId !== \"new\" ? (\r\n          <button onClick={deleteNote}>Delete</button>\r\n        ) : (\r\n          <button onClick={handleSubmit}>Done</button>\r\n        )}\r\n      </div>\r\n      <textarea\r\n        onChange={(e) => {\r\n          handleChange(e.target.value);\r\n        }}\r\n        value={note?.body}\r\n      ></textarea>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Notepage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}